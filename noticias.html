<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Noticia: Avances en Bioingeniería</title>
    <!-- Incluye una fuente de Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        /* -------------------------------------- */
        /* Estilos generales y base (Mobile-First) */
        /* -------------------------------------- */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f3f4f6;
            color: #1f2937;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
            margin: 0;
            padding: 0;
        }

        .container {
            max-width: 90rem;
            margin: auto;
            padding-left: 1rem;
            padding-right: 1rem;
        }

        /* -------------------------------------- */
        /* Estilos del Encabezado */
        /* -------------------------------------- */
        .header {
            background-color: #0d2c54;
            color: white;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .header-back-link {
            display: flex;
            align-items: center;
            color: white;
            font-size: 0.875rem;
            font-weight: 500;
            transition-property: color;
            transition-duration: 300ms;
            text-decoration: none;
        }

        .header-back-link:hover {
            color: #9ca3af;
        }

        .header-back-link svg {
            width: 1rem;
            height: 1rem;
            margin-right: 0.5rem;
        }

        .header-logo {
            flex-grow: 1;
            text-align: center;
        }
        
        .header-logo-accent {
            font-size: 1.5rem; /* Tamaño de fuente ajustado para móviles */
            font-weight: 700;
            color: #4ac7d9;
        }

        .header-logo-title {
            margin-left: 0.5rem;
            font-size: 1rem; /* Tamaño de fuente ajustado para móviles */
            font-weight: 600;
        }

        .header-spacer {
            width: 4rem;
        }

        /* -------------------------------------- */
        /* Contenido principal y barra lateral */
        /* -------------------------------------- */
        .main-content {
            display: grid;
            grid-template-columns: 1fr; /* Una columna por defecto (móvil) */
            gap: 2rem;
            margin-top: 2rem;
            padding: 0;
        }

        /* -------------------------------------- */
        /* Tarjetas de contenido */
        /* -------------------------------------- */
        .card {
            background-color: #fff;
            border-radius: 0.75rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            padding: 1.5rem; /* Padding base para móviles */
        }
        
        .article-category {
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            color: #3b82f6;
        }

        .article-title {
            font-size: 2rem; /* Tamaño de fuente ajustado para móviles */
            font-weight: 700;
            line-height: 1.25;
            margin-top: 0.5rem;
        }

        .article-meta {
            margin-top: 1rem;
            color: #6b7280;
            font-size: 0.875rem;
        }

        .article-meta span {
            font-weight: 600;
            color: #1f2937;
        }

        .article-image {
            width: 100%;
            height: auto;
            border-radius: 0.5rem;
            margin: 2rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        /* Estilos del texto del artículo */
        .prose {
            max-width: none;
            color: #374151;
            line-height: 1.625;
            font-size: 1rem; /* Tamaño de fuente ajustado para móviles */
        }

        .prose h2 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-top: 2rem;
            margin-bottom: 1rem;
        }

        .prose p {
            margin-bottom: 1rem;
        }

        .prose blockquote {
            border-left: 4px solid #3b82f6;
            padding-left: 1rem;
            margin: 1.5rem 0;
            font-style: italic;
            color: #4b5563;
        }

        .prose blockquote cite {
            display: block;
            margin-top: 0.5rem;
            font-weight: 600;
            color: #1f2937;
        }

        /* Sección de comentarios */
        .comments-section {
            padding: 1.5rem;
        }

        /* Este es el estilo que se añadió para separar visualmente las secciones */
        .comments-section.card {
            margin-top: 2rem;
        }

        .comments-section h2 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1.5rem;
            border-bottom: 1px solid #d1d5db;
            padding-bottom: 1rem;
        }

        .comment-form {
            margin-bottom: 2rem;
        }

        .comment-input {
            width: 95%;
            padding: 1rem;
            border: 1px solid #d1d5db;
            border-radius: 0.5rem;
            font-size: 1rem;
            transition-property: all;
            transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);
            transition-duration: 150ms;
            resize: vertical;
            min-height: 60px;
            max-height: 200px;
        }

        .comment-input:focus {
            outline: none;
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.5);
        }

        .comment-btn {
            margin-top: 1rem;
            padding: 0.75rem 1.5rem;
            border-radius: 9999px;
            font-weight: 600;
            background-color: #4ac7d9;
            color: #0d2c54;
            transition-property: background-color;
            transition-duration: 300ms;
        }

        .comment-btn:hover {
            background-color: #2fb9c7;
        }

        .comments-list {
            display: flex;
            flex-direction: column;
            gap: 1.5rem;
        }
        
        .comment {
            padding: 1rem;
            background-color: #f9fafb;
            border-radius: 0.5rem;
        }

        .comment-author {
            font-weight: 600;
            color: #1f2937;
        }
        
        .comment-date {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }
        
        .comment-text {
            margin-top: 0.5rem;
            color: #374151;
        }

        /* Paneles de la barra lateral */
        .aside {
            display: flex;
            flex-direction: column;
            gap: 2rem;
        }
        
        .aside h3 {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
            border-bottom: 1px solid #d1d5db;
            padding-bottom: 0.5rem;
        }

        .news-list {
            display: flex;
            flex-direction: column;
            list-style-type: none;
            margin: 0;
            padding: 0;
            gap: 1.5rem;
        }
        
        .news-item {
            display: flex;
            align-items: center;
            gap: 1rem;
            transition-property: all;
            transition-duration: 300ms;
            text-decoration: none;
            color: inherit;
        }

        .news-item:hover .news-title {
            color: #2563eb;
        }

        .news-item-image {
            width: 5rem;
            height: 5rem;
            object-fit: cover;
            border-radius: 0.375rem;
            flex-shrink: 0;
        }
        
        .news-item-content {
            display: flex;
            flex-direction: column;
        }

        /* Nuevo estilo para la categoría en las listas */
        .news-category {
            font-size: 0.75rem;
            font-weight: 600;
            color: #4b5563; /* Color de texto oscuro */
            background-color: #e5e7eb; /* Fondo gris claro */
            padding: 0.25rem 0.5rem;
            border-radius: 0.25rem;
            text-transform: uppercase;
            width: fit-content;
            margin-bottom: 0.5rem;
        }
        
        .news-title {
            font-weight: 600;
            transition-property: color;
            transition-duration: 300ms;
        }

        .news-date {
            font-size: 0.875rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }

        /* Pie de página */
        .footer {
            background-color: #0d2c54;
            color: white;
            padding: 3rem 0;
            margin-top: 3rem;
        }

        .footer-grid {
            display: grid;
            grid-template-columns: 1fr;
            gap: 2rem;
            text-align: center;
        }

        .footer-heading {
            font-size: 1.25rem;
            font-weight: 700;
            margin-bottom: 1rem;
        }

        .footer p, .footer a {
            color: #9ca3af;
            line-height: 1.625;
            text-decoration: none;
        }
        
        .footer a:hover {
            color: white;
            transition-property: color;
            transition-duration: 300ms;
        }

        /* -------------------------------------- */
        /* Media Queries (Diseño responsivo) */
        /* -------------------------------------- */

        /* Estilos para tabletas (mínimo 768px de ancho) */
        @media (min-width: 768px) {
            .container {
                padding-left: 1.5rem;
                padding-right: 1.5rem;
            }

            .card {
                padding: 2.5rem;
            }

            .header-logo-accent {
                font-size: 1.875rem;
            }

            .header-logo-title {
                font-size: 1.25rem;
            }
            
            .article-title {
                font-size: 2.5rem;
            }

            .prose {
                font-size: 1.125rem;
            }

            .prose h2 {
                font-size: 1.5rem;
            }
            
            .footer-grid {
                text-align: left;
                grid-template-columns: repeat(3, 1fr);
            }
        }

        @media (max-width: 768px) {
            .comment-input {
                width: 95%;
            }
        }

        /* Estilos para computadoras de escritorio (mínimo 1024px de ancho) */
        @media (min-width: 1024px) {
            .main-content {
                grid-template-columns: 2fr 1fr; /* Volvemos al diseño de dos columnas */
                padding: 0 2rem;
            }
            .article-title {
                font-size: 3rem;
            }

            /* Añadido para que el sidebar se mantenga visible al hacer scroll */
            .aside {
                position: sticky;
                top: 2rem;
                height: fit-content;
            }
        }

        @media (max-width: 425px) {
            .comment-input {
                width: 90%;
            }
        }

        @media (max-width: 375px) {
            .comment-input {
                width: 85%;
            }
        }
    </style>
</head>
<body class="antialiased">

    <!-- Encabezado de la página -->
    <header class="header">
        <div class="container">
            <div class="flex-container">
                <a href="index-noticias.html" class="header-back-link">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18"></path></svg>
                    Volver
                </a>
                <div class="header-logo">
                    <span class="header-logo-accent">POSGRADO</span>
                    <span class="header-logo-title">News</span>
                </div>
                <div class="header-spacer"></div>
            </div>
        </div>
    </header>

    <!-- Contenido principal de la noticia y paneles laterales -->
    <main class="container">
        <div class="main-content">
            <!-- Columna principal del artículo -->
            <div>
                <article class="card">
                    <span class="article-category">Investigación</span>
                    <h1 class="article-title">Nuevos hallazgos en la investigación de bioingeniería abren puertas a la medicina regenerativa</h1>
                    <p class="article-meta">Por: <span class="author-name">Dr. Alan Mendoza</span> | <span class="publish-date">22 de octubre, 2025</span></p>

                    <img src="https://placehold.co/1200x600/a3e635/000?text=Investigacion+destacada" alt="Imagen principal de la noticia" class="article-image">

                    <div class="prose">
                        <p>Un equipo de investigadores de la Universidad de Oxford ha publicado un estudio innovador que detalla cómo las células madre pueden ser utilizadas para reparar tejidos dañados, un avance crucial para el tratamiento de enfermedades crónicas. Este estudio podría transformar el campo de la medicina y ofrece esperanza a millones de pacientes que sufren de dolencias como la insuficiencia cardíaca o el daño neurológico.</p>
                        
                        <p>La investigación, liderada por la Dra. Sarah Johnson, se centró en la manipulación genética de células madre pluripotentes para que estas se diferenciaran de forma controlada en tipos de células específicas, como cardiomiocitos o neuronas. El equipo demostró, en modelos preclínicos, que estas células podían injertarse en el tejido dañado y comenzar a integrarse y funcionar, restaurando parcialmente la funcionalidad del órgano afectado.</p>
                        
                        <blockquote>
                            "Este es un hito monumental en la bioingeniería. No solo hemos demostrado que la regeneración de tejidos es posible a esta escala, sino que también hemos desarrollado un método para hacerlo de una manera que minimiza el riesgo de rechazo inmunológico. Los resultados son muy prometedores."
                            <cite>- Dra. Sarah Johnson, Investigadora Principal</cite>
                        </blockquote>

                        <h2>Impacto Potencial y Próximos Pasos</h2>
                        <p>El impacto de este estudio va más allá de la medicina regenerativa. La capacidad de controlar la diferenciación de células madre con alta precisión abre nuevas vías para la investigación farmacéutica, permitiendo la creación de modelos de tejidos humanos para probar la eficacia y toxicidad de nuevos medicamentos sin necesidad de ensayos en animales. Esto podría acelerar significativamente el desarrollo de nuevos tratamientos.</p>
                        <p>Los investigadores planean ahora avanzar hacia ensayos clínicos en humanos, con la esperanza de que la terapia pueda estar disponible para pacientes en la próxima década. Aunque aún queda un largo camino por recorrer, este estudio representa un faro de esperanza para un futuro donde las enfermedades degenerativas puedan ser curadas, no solo tratadas.</p>
                    </div>
                </article>

                <!-- Sección de Comentarios -->
                <section id="comments-section" class="card comments-section">
                    <h2>Comentarios</h2>

                    <!-- Formulario para dejar un comentario -->
                    <div class="comment-form">
                        <textarea id="comment-input" class="comment-input" rows="3" placeholder="Escribe tu comentario..." style="min-height:60px;max-height:200px;resize:vertical;"></textarea>
                        <button id="submit-comment-btn" class="comment-btn">
                            Enviar Comentario
                        </button>
                    </div>

                    <!-- Lista de comentarios simulados -->
                    <div id="comments-list" class="comments-list">
                        <!-- Comentario de ejemplo 1 -->
                        <div class="comment">
                            <p class="comment-date">22 de octubre, 2025</p>
                            <p class="comment-text">¡Qué noticia tan inspiradora! Es increíble lo rápido que avanza la ciencia. Estoy muy emocionada por lo que esto significa para el futuro de la medicina.</p>
                        </div>

                        <!-- Comentario de ejemplo 2 -->
                        <div class="comment">
                            <p class="comment-date">23 de octubre, 2025</p>
                            <p class="comment-text">Como estudiante de biología, estos avances me motivan a seguir investigando. La bioingeniería es, sin duda, el camino a seguir para resolver muchos de los problemas de salud actuales.</p>
                        </div>
                    </div>
                </section>
            </div>
            
            <!-- Columna de la barra lateral (Paneles de Interés) -->
            <aside class="aside">
                <!-- Panel de Noticias Relacionadas -->
                <div class="card">
                    <h3>Noticias Relacionadas</h3>
                    <ul class="news-list">
                        <li>
                            <a href="#" class="news-item">
                                <img src="https://placehold.co/100x80/fecaca/000?text=Avance+Cientifico" alt="Miniatura de noticia" class="news-item-image">
                                <div class="news-item-content">
                                    <span class="news-category">Tecnología</span>
                                    <h4 class="news-title">Descubren nuevo método para purificar agua con IA</h4>
                                    <p class="news-date">20 de octubre, 2025</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="news-item">
                                <img src="https://placehold.co/100x80/a3e635/000?text=Congreso+2025" alt="Miniatura de noticia" class="news-item-image">
                                <div class="news-item-content">
                                    <span class="news-category">Eventos</span>
                                    <h4 class="news-title">Congreso 2025 de Robótica y Bioética</h4>
                                    <p class="news-date">15 de octubre, 2025</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="news-item">
                                <img src="https://placehold.co/100x80/4ac7d9/0d2c54?text=Becas+Doctorales" alt="Miniatura de noticia" class="news-item-image">
                                <div class="news-item-content">
                                    <span class="news-category">Educación</span>
                                    <h4 class="news-title">Cómo financiar tu doctorado en ciencias de la salud</h4>
                                    <p class="news-date">10 de octubre, 2025</p>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>

                <!-- Panel de Noticias Populares -->
                <div class="card">
                    <h3>Noticias Populares</h3>
                    <ul class="news-list">
                        <li>
                            <a href="#" class="news-item">
                                <img src="https://placehold.co/100x80/ffe4e6/000?text=Importancia" alt="Miniatura de noticia" class="news-item-image">
                                <div class="news-item-content">
                                    <span class="news-category">Investigación</span>
                                    <h4 class="news-title">La importancia de la multidisciplinariedad en la ciencia moderna</h4>
                                    <p class="news-date">22 de septiembre, 2025</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="news-item">
                                <img src="https://placehold.co/100x80/cffafe/000?text=Tesis" alt="Miniatura de noticia" class="news-item-image">
                                <div class="news-item-content">
                                    <span class="news-category">Consejos</span>
                                    <h4 class="news-title">¿Cómo elegir tu tema de tesis de posgrado?</h4>
                                    <p class="news-date">18 de septiembre, 2025</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="news-item">
                                <img src="https://placehold.co/100x80/dcfce7/000?text=Entrevista" alt="Miniatura de noticia" class="news-item-image">
                                <div class="news-item-content">
                                    <span class="news-category">Entrevistas</span>
                                    <h4 class="news-title">Entrevista con la Dra. Elena Rodríguez sobre su último paper</h4>
                                    <p class="news-date">10 de septiembre, 2025</p>
                                </div>
                            </a>
                        </li>
                        <li>
                            <a href="#" class="news-item">
                                <img src="https://placehold.co/100x80/a5f3fc/000?text=Financiamiento" alt="Miniatura de noticia" class="news-item-image">
                                <div class="news-item-content">
                                    <span class="news-category">Oportunidades</span>
                                    <h4 class="news-title">Novedades en financiamiento para proyectos de investigación</h4>
                                    <p class="news-date">1 de septiembre, 2025</p>
                                </div>
                            </a>
                        </li>
                    </ul>
                </div>
            </aside>
        </div>
    </main>

    <!-- Pie de página (Footer) -->
    <footer class="footer">
        <div class="container">
            <div class="footer-grid">
                <div>
                    <h4 class="footer-heading">Sobre Nosotros</h4>
                    <p>Noticias de Posgrado es la fuente principal de información para estudiantes y profesionales en el ámbito académico y de investigación.</p>
                </div>
                <div>
                    <h4 class="footer-heading">Secciones</h4>
                    <ul>
                        <li><a href="#">Investigación</a></li>
                        <li><a href="#">Eventos</a></li>
                        <li><a href="#">Oportunidades</a></li>
                        <li><a href="#">Blog</a></li>
                    </ul>
                </div>
                <div>
                    <h4 class="footer-heading">Contacto</h4>
                    <p>Email: contacto@posgradonews.com</p>
                    <p>Teléfono: +52 55 1234 5678</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // --- CARGA DINÁMICA DE NOTICIA POR ID ---
        function getQueryParam(param) {
            const urlParams = new URLSearchParams(window.location.search);
            return urlParams.get(param);
        }

        function formatearFecha(fechaStr) {
            const meses = ['enero', 'febrero', 'marzo', 'abril', 'mayo', 'junio', 'julio', 'agosto', 'septiembre', 'octubre', 'noviembre', 'diciembre'];
            if (!fechaStr || typeof fechaStr !== 'string') return fechaStr;
            const partes = fechaStr.split('-');
            if (partes.length !== 3) return fechaStr;
            const anio = partes[0];
            const mes = parseInt(partes[1], 10) - 1;
            const dia = parseInt(partes[2], 10);
            if (isNaN(mes) || isNaN(dia)) return fechaStr;
            return `${dia} de ${meses[mes]}, ${anio}`;
        }

        function renderNoticiaDetalle(noticia) {
            const detalle = document.querySelector('article.card');
            if (!detalle || !noticia) return;
            const rutaImagen = noticia.imagen.startsWith('img/') ? noticia.imagen : 'img/' + noticia.imagen;
            detalle.innerHTML = `
                <span class="article-category">${noticia.categoria || 'General'}</span>
                <h1 class="article-title">${noticia.titulo}</h1>
                <p class="article-meta">Por: <span class="author-name">${noticia.creador || 'Desconocido'}</span> | <span class="publish-date">${formatearFecha(noticia.fecha)}</span></p>
                <img src="${rutaImagen}" alt="Imagen principal de la noticia" class="article-image">
                <div class="prose">
                    <p>${noticia.contenido}</p>
                </div>
            `;
        }

        function incrementarContadorClic(id) {
            fetch('noticias-contador.php', {
                method: 'POST',
                headers: { 'Content-Type': 'application/json' },
                body: JSON.stringify({ id })
            });
        }

        function renderNoticiasRelacionadas(noticias, categoria, idPrincipal) {
            const lista = document.querySelectorAll('.aside .card .news-list')[0];
            if (!lista) return;
            let relacionadas = noticias.filter(n => n.categoria === categoria && n.id !== idPrincipal);
            // Si hay menos de 3 relacionadas, rellenar con aleatorias (sin repetir la principal ni duplicar)
            if (relacionadas.length < 3) {
                const faltantes = 3 - relacionadas.length;
                // Noticias que no sean la principal ni ya estén en relacionadas
                const restantes = noticias.filter(n => n.id !== idPrincipal && !relacionadas.some(r => r.id === n.id));
                const aleatorias = restantes.sort(() => Math.random() - 0.5).slice(0, faltantes);
                relacionadas = relacionadas.concat(aleatorias);
            }
            // Limitar a solo 3
            relacionadas = relacionadas.slice(0, 3);
            lista.innerHTML = relacionadas.map(n => {
                const rutaImagen = n.imagen.startsWith('img/') ? n.imagen : 'img/' + n.imagen;
                return `
                <li>
                    <a class="news-item" href="noticias.html?id=${n.id}" data-id="${n.id}">
                        <img src="${rutaImagen}" alt="${n.titulo}" class="news-item-image">
                        <div class="news-item-content">
                            <span class="news-category">${n.categoria}</span>
                            <span class="news-title">${n.titulo}</span>
                            <span class="news-date">${formatearFecha(n.fecha)}</span>
                        </div>
                    </a>
                </li>
                `;
            }).join('');
            // Agregar evento para contador de clics
            lista.querySelectorAll('a.news-item').forEach(a => {
                a.addEventListener('click', function(e) {
                    incrementarContadorClic(this.getAttribute('data-id'));
                });
            });
        }

        function renderNoticiasPopulares(noticias, idPrincipal) {
            const lista = document.querySelectorAll('.aside .card .news-list')[1];
            if (!lista) return;
            // Filtrar noticias con campo 'clics', excluir la principal
            let populares = noticias.filter(n => typeof n.clics === 'number' && n.id !== idPrincipal);
            // Ordenar por clics descendente y tomar las 4 más populares
            populares = populares.sort((a, b) => b.clics - a.clics).slice(0, 4);
            // Si no hay suficientes, completar con aleatorias
            if (populares.length < 4) {
                const faltantes = 4 - populares.length;
                const restantes = noticias.filter(n => n.id !== idPrincipal && !populares.includes(n));
                populares = populares.concat(restantes.sort(() => Math.random() - 0.5).slice(0, faltantes));
            }
            lista.innerHTML = populares.map(n => {
                const rutaImagen = n.imagen.startsWith('img/') ? n.imagen : 'img/' + n.imagen;
                return `
                <li>
                    <a class="news-item" href="noticias.html?id=${n.id}" data-id="${n.id}">
                        <img src="${rutaImagen}" alt="${n.titulo}" class="news-item-image">
                        <div class="news-item-content">
                            <span class="news-category">${n.categoria}</span>
                            <span class="news-title">${n.titulo}</span>
                            <span class="news-date">${formatearFecha(n.fecha)}</span>
                        </div>
                    </a>
                </li>
                `;
            }).join('');
            // Agregar evento para contador de clics
            lista.querySelectorAll('a.news-item').forEach(a => {
                a.addEventListener('click', function(e) {
                    incrementarContadorClic(this.getAttribute('data-id'));
                });
            });
        }

        document.addEventListener('DOMContentLoaded', () => {
            // Cargar noticia por id si existe en la URL
            const noticiaId = getQueryParam('id');
            if (noticiaId) {
                fetch('noticias.json')
                    .then(res => res.json())
                    .then(data => {
                        const idNum = parseInt(noticiaId, 10);
                        const noticia = data.noticias.find(n => n.id === idNum);
                        if (noticia) {
                            renderNoticiaDetalle(noticia);
                            renderNoticiasRelacionadas(data.noticias, noticia.categoria, noticia.id);
                            renderNoticiasPopulares(data.noticias, noticia.id);
                        }
                    });
            }

            // --- Comentarios (sin cambios) ---
            const commentInput = document.getElementById('comment-input');
            const submitCommentBtn = document.getElementById('submit-comment-btn');
            const commentsList = document.getElementById('comments-list');

            submitCommentBtn.addEventListener('click', () => {
                const commentText = commentInput.value.trim();
                if (commentText) {
                    const newComment = document.createElement('div');
                    newComment.className = 'comment';
                    const user = 'Tú';
                    const date = new Date().toLocaleDateString('es-ES', {
                        day: 'numeric',
                        month: 'long',
                        year: 'numeric'
                    });
                    newComment.innerHTML = `
                        <p class="comment-author">${user}</p>
                        <p class="comment-date">${date}</p>
                        <p class="comment-text">${commentText}</p>
                    `;
                    commentsList.prepend(newComment);
                    commentInput.value = '';
                }
            });
        });
    </script>
</body>
</html>
